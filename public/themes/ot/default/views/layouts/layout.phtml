<?php echo $this->doctype('XHTML1_STRICT'); ?>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<?php

$register = new Ot_Var_Register();

$this->headMeta()->appendName('keywords', $register->metaKeywords->getValue())
                 ->appendHttpEquiv('Content-Type', 'text/html; charset=UTF-8')
                 ->appendHttpEquiv('Content-Language', 'en-US');             
                 
echo $this->headMeta() . "\n";
$this->headTitle($register->appTitle->getValue())
     ->headTitle(strip_tags($this->title))
     ->headTitle()->setSeparator(' - ');

echo "\n";
     
echo $this->headTitle() . "\n\n";

//print the minified (common) css first, then the autoloaded css
echo $this->minifyHeadLink() . "\n";
echo $this->headLink() . "\n\n";

// print the minified (common) scripts first, then the autoloaded scripts
echo $this->minifyHeadScript() . "\n";
echo $this->headScript() . "\n";
$this->overrideTranslation()->js(); 

echo "\n";
?>

</head>
<body>
    <input type="hidden" name="baseUrl" id="baseUrl" value="<?php echo $this->baseUrl(); ?>" />

    <div id="doc4" class="yui-t7">
        <div id="hd" class="ui-widget-header ui-corner-top">
            <div class="authInfo"><?php echo $this->render('auth.phtml'); ?></div>
            <span id="appTitle"><?php echo $register->appTitle->getValue(); ?></span>
        </div>
        <div id="bd">
            <div class="yui-g" id="navBar">
                <?php echo $this->render('nav.phtml'); ?>
            </div>
            
            <div class="yui-g">
                <div class="content">
                    <?php
                        $zrMessages = array();
                        $fmMessages = array();
                        $mMessages = array();
                        
                        if(Zend_Registry::isRegistered('flashMessages')) {
                            $zrMessages = Zend_Registry::get('flashMessages');
                        }
                        
                        $mMessages = (isset($this->messages) && is_array($this->messages)) ? $this->messages : array();
                        $messages = array_merge($zrMessages, $fmMessages, $mMessages);
                        
                        
                        if(count($messages) > 0) {
                            echo '<div id="systemMessages">';
                            $sprites = array(
                                'error' => 'alert',
                                'info' => 'info',
                                'warning' => 'notice',
                                'success' => 'check',
                            );
                            if(count($messages) != 0) {
                                foreach($messages as $m) {
                                    $type = (is_object($m)) ? $m->type : 'info';
                                    $message = (is_object($m)) ? $m->message : $m;
                                    echo '<div class="alert alert-' . $type . '">'
                                    . '<span class="ui-icon ui-icon-' . (isset($sprites[$type]) ? $sprites[$type] : 'info') . '" style="float:left;"></span>'
                                    . $this->translate($message)
                                    . '</div>'
                                    ;
                                }
                            }
                        }
                        ?>

                    <div id="pageTitle"><?php echo $this->title; ?></div>

                    <?php echo $this->layout()->content; ?>
                </div>
            </div>
            <?php $this->overrideTranslation()->link($this->translate('theme-layouts-layout:editText')); ?>
        </div>
        <div id="ft" class="ui-corner-bottom">
            <?php echo $this->render('footer.phtml'); ?>
        </div>
    </div>
    
</body>
</html>